<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Carrinho - AngelBoost</title>
  <link rel="stylesheet" href="/all.css" />
  <script src="/carrinho.js" defer></script>
</head>
<body>
  <div class="navegbar">
    <div class="header-inner-content">
      <h1 class="logo">Angel<span>Boost</span></h1>
      <nav class="navbar">
        <ul>
          <li><a href="/">Home</a></li>
          <li>Produtos</li>
          <li>Sobre</li>
          <li>Contatos</li>
          <li><a href="/pedidos">Histórico</a></li>
        </ul>
      </nav>
      <div class="nav-icon-container">
        <a href="/carrinho"><img src="/images/cart.png" alt="Cart"></a>
      </div>
    </div>
  </div>

  <section class="produtos" style="background:#fff; max-width:1300px; margin: 2rem auto">
    <h2 style="margin-bottom:1rem">Seu carrinho</h2>

    <% if (itens.length === 0) { %>
      <p>Seu carrinho está vazio.</p>
    <% } else { %>
      <table style="width:100%; border-collapse: collapse;">
        <thead>
          <tr>
            <th style="text-align:left; padding:.5rem; border-bottom:1px solid #ddd;">Produto</th>
            <th style="text-align:left; padding:.5rem; border-bottom:1px solid #ddd;">Preço</th>
            <th style="text-align:left; padding:.5rem; border-bottom:1px solid #ddd;">Qtd</th>
            <th style="text-align:left; padding:.5rem; border-bottom:1px solid #ddd;">Subtotal</th>
          </tr>
        </thead>
        <tbody>
        <% itens.forEach(item => { %>
          <tr>
            <td style="padding:.5rem;">
              <img src="<%= item.img_url %>" alt="" style="width:60px; vertical-align:middle; margin-right:10px;">
              <%= item.nome %>
            </td>
            <td style="padding:.5rem;">R$ <%= Number(item.preco).toFixed(2) %></td>
            <td style="padding:.5rem;">
              <button onclick="remove('<%= item.produto_id %>')" style="padding: 0 .1rem;">-</button>
              <span id="produto<%= item.produto_id %>qnt"><%= item.quantidade %></span>
              <button onclick="add('<%= item.produto_id %>')">+</button>
            </td>
            <td style="padding:.5rem;">R$ <%= Number(item.subtotal).toFixed(2) %></td>
          </tr>
        <% }) %>
        </tbody>
      </table>

      <h3 style="text-align:right; margin-top:1rem;">Total: R$ <%= total.toFixed(2) %></h3>
      <form style="text-align:right; margin-top:1rem;" id="cart-form">
        <button class="btn-basico" type="submit">Finalizar compra</button>
      </form>
    <% } %>
  </section>
</body>
</html>